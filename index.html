<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocal Pitch Analyzer</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Additional styles for improved pitch guide */
        .pitch-guide {
            margin-top: 2rem;
        }
        
        .range-guide {
            position: relative;
            height: 80px;
            margin: 20px 0;
            background: #f5f5f5;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .frequency-scale {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
            color: #555;
        }
        
        .range {
            position: absolute;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            border-radius: 4px;
        }
        
        .male {
            bottom: 10px;
            left: 5%;
            width: 45%;
            background-color: rgba(0, 0, 255, 0.7);
        }
        
        .androgynous {
            top: 10px;
            left: 35%;
            width: 15%;
            background-color: rgba(128, 0, 128, 0.7);
        }
        
        .female {
            top: 10px;
            left: 40%;
            width: 45%;
            background-color: rgba(255, 0, 255, 0.7);
        }
        
        .overlap-label {
            position: absolute;
            font-size: 11px;
            color: #333;
        }
        
        .hz-marker {
            position: absolute;
            bottom: -15px;
            transform: translateX(-50%);
            font-size: 11px;
            color: #555;
        }
        
        .hz-line {
            position: absolute;
            height: 80px;
            width: 1px;
            background-color: rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Vocal Pitch Analyzer</h1>
            <p>Upload audio files to analyze and compare vocal pitch for feminine voice training</p>
            <div class="dedication">For Yue <3</div>
        </header>
        
        <div class="upload-section">
            <div class="upload-container">
                <h2>Audio File 1</h2>
                <input type="file" id="audioFile1" accept="audio/*">
                <div class="audio-player">
                    <audio id="player1" controls></audio>
                </div>
            </div>
            
            <div class="upload-container">
                <h2>Audio File 2 (Optional)</h2>
                <input type="file" id="audioFile2" accept="audio/*">
                <div class="audio-player">
                    <audio id="player2" controls></audio>
                </div>
            </div>
        </div>
        
        <div class="analyze-section">
            <button id="analyzeBtn" disabled>Analyze Pitch</button>
            <div id="progressContainer" class="progress-container hidden">
                <div class="spinner"></div>
                <div id="progressText">Analyzing audio...</div>
                <div id="progressBar" class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
            </div>
        </div>
        
        <div class="results-section">
            <div class="stats">
                <div id="stats1" class="stat-container">
                    <h3>File 1 Statistics</h3>
                    <p>Average Pitch: <span id="avgPitch1">-</span></p>
                    <p>Minimum Pitch: <span id="minPitch1">-</span></p>
                    <p>Maximum Pitch: <span id="maxPitch1">-</span></p>
                </div>
                <div id="stats2" class="stat-container">
                    <h3>File 2 Statistics</h3>
                    <p>Average Pitch: <span id="avgPitch2">-</span></p>
                    <p>Minimum Pitch: <span id="minPitch2">-</span></p>
                    <p>Maximum Pitch: <span id="maxPitch2">-</span></p>
                </div>
            </div>
            
            <div class="chart-container">
                <canvas id="pitchChart"></canvas>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="color-box file1"></div>
                    <span>File 1</span>
                </div>
                <div class="legend-item">
                    <div class="color-box file2"></div>
                    <span>File 2</span>
                </div>
            </div>
            
            <div class="pitch-guide">
                <h3>Pitch Range Guide</h3>
                <div class="frequency-scale">
                    <span>80 Hz</span>
                    <span>260 Hz</span>
                </div>
                <div class="range-guide">
                    <!-- Frequency markers -->
                    <div class="hz-line" style="left: 5%;"></div>
                    <div class="hz-marker" style="left: 5%;">85</div>
                    
                    <div class="hz-line" style="left: 34%;"></div>
                    <div class="hz-marker" style="left: 34%;">145</div>
                    
                    <div class="hz-line" style="left: 42%;"></div>
                    <div class="hz-marker" style="left: 42%;">165</div>
                    
                    <div class="hz-line" style="left: 50%;"></div>
                    <div class="hz-marker" style="left: 50%;">175</div>
                    
                    <div class="hz-line" style="left: 85%;"></div>
                    <div class="hz-marker" style="left: 85%;">255</div>
                    
                    <!-- Range bars -->
                    <div class="range male">
                        <span>Male Range (85-180 Hz)</span>
                    </div>
                    <div class="range androgynous">
                        <span>Androgynous (145-175 Hz)</span>
                    </div>
                    <div class="range female">
                        <span>Female Range (165-255 Hz)</span>
                    </div>
                    
                    <!-- Overlap indicators -->
                    <div class="overlap-label" style="top: 45px; left: 38%;">Overlap</div>
                </div>
                
                <div style="margin-top: 30px; font-size: 14px; color: #666;">
                    <p><strong>Note:</strong> The androgynous range (145-175 Hz) represents the overlap where voices may be perceived as either gender depending on other vocal factors.</p>
                    <p>There's also a small overlap (165-175 Hz) between all three ranges where pitch alone is insufficient to determine perceived gender.</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Note: This tool is designed for voice training purposes. Pitch is just one aspect of voice feminization.</p>
        </footer>
    </div>

    <!-- Load libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.0.0"></script>
    <script src="script.js"></script>
</body>
</html>
